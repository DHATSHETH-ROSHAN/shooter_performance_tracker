{% extends "admin/adminbase.html" %}
{% load static %} 
{% block extra_css %}
<link rel= "stylesheet" href="{% static 'css/admin/staffhome.css'%}">
<!-- Add to your template -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
{% endblock %}
{% block content %}
{% include "admin/adminnavbar.html" %}
<div class="container-flex text-light page-container">
    <div class="wrapper d-flex">
        <div id="sidebar" class="rounded bg-base-dark d-flex flex-column">
            <button id="shrink-btn" class="custom-btn"><i class="fa-solid fa-down-left-and-up-right-to-center" ></i><span>Shrink</span></button>
            <button id="users-btn" class="custom-btn"><i class="fa-solid fa-users"></i><span>Users </span></button>
            <button id="coach-relation-btn" class="custom-btn"><i class="fa-solid fa-chalkboard-user"></i><span>Coaches</span></button>
            <button id="notifications-btn" class="custom-btn"><i class="fa-regular fa-bell" ></i><span>Notifications & Messages</span></button>
            <button id="profile-btn" class="custom-btn"><i class="fa-regular fa-address-card" ></i><span>Profile</span></button>
            {% comment %} <button id="settings-btn" class="custom-btn"><i class="fa-solid fa-user-gear"></i><span> Settings</span></button> {% endcomment %}
        </div>
        <div id="main-Content" class="right-cnt bg-base-light rounded" >
            {% comment %} users container {% endcomment %}
            <div id="users-container" class="container-fluid text-light rounded w-100" style=" display:none;">
                <div class="row d-flex justify-content-between align-items-start gap-3" style="padding-top:15px;">
                    <div class="col-md-12">
                        <div class="row align-items-center gx-3 p-3" style="background-color: #050505; border-radius: 12px;">
                            <div class="col-12" >
                                <p class='table-headings' >Users</p>
                            </div>
                            <div>
                                <table class="text-center w-100 table-bordered">
                                    <thead>
                                        <tr class="tb-head">
                                            <th>S.No</th>
                                            <th>Tables Names</th>
                                            <th>Add</th>
                                            <th>Count of entries</th>
                                            <th>View</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-contents">
                                        <tr>
                                            <td>1.</td>
                                            <td>Students List</td>
                                            <td><i class="bi bi-plus-lg" data-bs-toggle="modal" data-bs-target="#shooterAddModal" style="cursor: pointer;" ></i></td>
                                            <td>{{ students_count }}</td>
                                            <td><i onclick="showDetails('shooterdetails')" style="cursor: pointer; color: #00ddff;" class="bi bi-eye"></i></td>
                                        </tr>
                                        <tr>
                                            <td>2.</td>
                                            <td>Coaches List</td>
                                            <td><i class="bi bi-plus-lg" data-bs-toggle="modal" data-bs-target="#coachAddModal" style="cursor: pointer;"></i></td>
                                            <td>{{ coaches_count }}</td>
                                            <td><i onclick="showDetails('coachDetails')" style="cursor: pointer; color: #00ddff;" class="bi bi-eye"></i></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="shooterdetails" class="py-3 stud-coach-table" style="display:none;">
                                <hr>
                                <div class="d-flex justify-content-between align-items-center">
                                    <p class="tb-head mb-0 ">Shooter Details</p>
                                    <button onclick="closeFunction('shooterdetails')" class="btn border-0 p-0">
                                        <i class="bi bi-x-circle" style="background-color: #050505; color: #00ddff; font-size: 1.2rem;"></i>
                                    </button>
                                </div>
                                <div class="pt-3 d-flex justify-content-between align-items-center">
                                    <table class="text-center w-100 table-bordered">
                                        <thead>
                                            <tr class="tb-head">
                                                <th>S.No</th>
                                                <th>Names</th>
                                                <th>D.O.B</th>
                                                <th>Email</th>
                                                <th>Mobile no.</th>
                                                <th>Gender</th>
                                                <th>category</th>
                                                <th>views</th>
                                                <th>Remove</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for shooter in club_students %}
                                            <tr>
                                                <td class="text-center">{{ forloop.counter }}</td>
                                                <td>{{ shooter.username }}</td>
                                                <td>{{ shooter.date_of_birth}}</td>
                                                <td>{{ shooter.email }}</td>
                                                <td>{{ shooter.mobile_number }}</td>
                                                <td>{{ shooter.gender }}</td>
                                                <td>{{ shooter.category }}</td>
                                                <td class="text-center">
                                                        <i class="bi bi-eye" onclick="viewShooter({{ shooter.id }})" style="color: #00ddff"></i>
                                                </td>
                                                <td class="text-center">
                                                    <i class="bi bi-trash" style="color: crimson; cursor: pointer;" title="Remove Shooter from Club"
                                                    onclick="removeUserFromClub({{ shooter.id }}, 'Shooter')"></i>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>                            
                            <div id="coachDetails" class="py-3 stud-coach-table" style="display:none;">
                                <hr>
                                <div class="d-flex justify-content-between align-items-center">
                                    <p class="tb-head mb-0">Coache's Details</p>
                                    <button onclick="closeFunction('coachDetails')" class="btn border-0 p-0">
                                        <i class="bi bi-x-circle" style="background-color: #050505; color: #00ddff; font-size: 1.2rem;"></i>
                                    </button>
                                </div>
                                <div class="pt-3 d-flex justify-content-between align-items-center">
                                    <table class="text-center w-100 table-bordered">
                                        <thead>
                                            <tr class="tb-head">
                                                <th>S.No</th>
                                                <th>Names</th>
                                                <th>D.O.B</th>
                                                <th>Email</th>
                                                <th>Mobile no.</th>
                                                <th>Gender</th>
                                                <th>category</th>
                                                <th>Specialization</th>
                                                <th>View</th>
                                                <th>Remove</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for coach in club_coaches %}
                                            <tr>
                                                <td class="text-center">{{ forloop.counter }}</td>
                                                <td>{{ coach.username }}</td>
                                                <td>{{ coach.date_of_birth}}</td>
                                                <td>{{ coach.email }}</td>
                                                <td>{{ coach.mobile_number }}</td>
                                                <td>{{ coach.gender }}</td>
                                                <td>{{ coach.category }}</td>
                                                <td>{{ coach.coaching_specialization }}</td>
                                                <td class="text-center">
                                                        <i class="bi bi-eye" onclick="viewCoach({{ coach.id }})" style="color: #00ddff"></i>
                                                </td>
                                                <td>
                                                    <i class="bi bi-x-circle" style="cursor:pointer; color: red;"onclick="removeUserFromClub({{ coach.id }}, 'Coach')"></i>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            {% comment %} students details container {% endcomment %}
                            <div id="shooterDetailsContainer" class="pt-3 details-container " style="display:none;">
                                <hr >
                                <div class="d-flex justify-content-between align-items-center">
                                    <h4 class="tb-head">Shooter Details</h4>
                                    <button onclick="closeFunctionS_C_cont('shooterDetailsContainer','shooterdetails')" class="btn border-0 p-0"><i class="bi bi-x-circle" style="color: #00DDFF; font-size: 1.2rem;"></i></button>
                                </div>
                                <div class="pt-3">
                                    <table class="text-center w-100 table-bordered">
                                        <thead>
                                            <tr class="tb-head">
                                                <th>Name</th>
                                                <th>Email</th>
                                                <th>Mobile</th>
                                                <th>Category</th>
                                                <th>Gender</th>
                                                <th>Coach</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span id="shooterName"></span></td>
                                                <td><span id="shooterEmail"></span></td>
                                                <td><span id="shooterMobile"></span></td>
                                                <td><span id="shooterCategory"></span></td>
                                                <td><span id="shooterGender"></span></td>
                                                <td><span id="coach_name"></span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                {% comment %} manual Scores {% endcomment %}
                                <div>
                                    <hr>
                                    <h4 class="tb-head"> Manual Scores </h4>
                                </div>
                                <div class="pt-3 d-flex justify-content-between align-items-center">
                                    <table class="text-center w-100 table-bordered">
                                        <thead>
                                            <tr class="tb-head">
                                                <th>S.No</th>
                                                <th>Date</th>
                                                <th>Match Type</th>
                                                <th>Series 1</th>
                                                <th>Series 2</th>
                                                <th>Series 3</th>
                                                <th>Series 4</th>
                                                <th>Series 5</th>
                                                <th>Series 6</th>
                                                <th>Total</th>
                                                <th>Average Shot</th>
                                                <th>Duration</th>
                                            </tr>
                                        </thead>
                                        <tbody id="shotersManualScoreTable">
                                        </tbody>
                                    </table>
                                </div>
                                {% comment %} Est Scores {% endcomment %}
                                <div>
                                    <hr>
                                    <h4 class="tb-head"> EST Scores </h4>
                                </div>
                                <div class="pt-3 d-flex justify-content-between align-items-center">
                                    <table class="text-center w-100 table-bordered">
                                        <thead>
                                            <tr class="tb-head">
                                                <th>S.No</th>
                                                <th>Date</th>
                                                <th>Match Type</th>
                                                <th>Series 1</th>
                                                <th>Series 2</th>
                                                <th>Series 3</th>
                                                <th>Series 4</th>
                                                <th>Series 5</th>
                                                <th>Series 6</th>
                                                <th>Total</th>
                                                <th>Average Shot</th>
                                                <th>Duration</th>
                                            </tr>
                                        </thead>
                                        <tbody id="shotersEstScoreTable">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            {% comment %} coach details contaainer {% endcomment %}
                            <div id="coachDetailsContainer" class="p-3 details-container" style="display:none;">
                                <hr>
                                <div class="d-flex justify-content-between align-items-center">
                                    <h4 class="tb-head">Coach Details</h4>
                                    <button onclick="closeFunctionS_C_cont('coachDetailsContainer','coachDetails')" class="btn border-0 p-0"><i class="bi bi-x-circle" style="color: #00DDFF; font-size: 1.2rem;"></i></button>
                                </div>
                                <div class="pt-3">
                                    <table class="text-center w-100 table-bordered">
                                        <thead>
                                            <tr class="tb-head">
                                                <th>Name</th>
                                                <th>Email</th>
                                                <th>Mobile</th>
                                                <th>Gender</th>
                                                <th>Experience(in years)</th>
                                                <th>Specialization</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span id="coachName"></span></td>
                                                <td><span id="coachEmail"></span></td>
                                                <td><span id="coachMobile"></span></td>
                                                <td><span id="coachGender"><span></td>
                                                <td><span id="coachExperience"></span></td>
                                                <td><span id="coachSpecialization"></span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="d-flex justify-content-between flex-wrap" style="padding-top: 30px;">
                                    <div class="card bg-dark text-light text-center p-3 shadow-sm" style="width: 300px;">
                                        <i class="fas fa-users fa-2x text-primary"></i>
                                        <p class="mt-2 tb-head">Total Shooters</p>
                                        <span id="shooters_count"></span>
                                    </div>
                                    <div class="card bg-dark text-light text-center p-3 shadow-sm" style="width: 300px;">
                                        <i class="fas fa-male fa-2x text-info" style="color: #040273;"></i>
                                        <p class="mt-2 tb-head">Male Shooters</p>
                                        <span id="male_shooters_count"></span>
                                    </div>
                                    <div class="card bg-dark text-light text-center p-3 shadow-sm" style="width: 300px;">
                                        <i class="fas fa-female fa-2x" style="color: #FF1493"></i>
                                        <p class="mt-2 tb-head" >Female Shooters</p>
                                        <span id="female_shooters_count"></span>
                                    </div>
                                </div>
                                <div class="bg-dark text-light mt-3 p-3 shadow-sm" style="border-radius:12px;">
                                    <h4 class="tb-head">Shooters Details</h4>
                                    <table class="text-center w-100 table-bordered">
                                        <thead class="tb-head">
                                            <th>S.No</th>
                                            <th>Name</th>
                                            <th>category</th>
                                            <th>D.O.B</th>
                                            <th>Mobile</th>
                                            <th>Gender</th>
                                        </thead>
                                        <tbody id="shooterTableBody">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            {% comment %} shooter edit modal {% endcomment %}
                            <div class="modal fade" id="shooterAddModal" tabindex="-1" aria-labelledby="shooterAddModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content" style="background-color: #050505; border-radius: 12px; border: solid 1px #00DDFF;">
                                        <div class="modal-header" style="border-bottom: none;">
                                            <h4 class="modal-title" id="shooterAddModalLabel" style="color: #00DDFF; font-size: 1.5rem;">Add Shooter</h4>
                                            <button type="button" class="border-0 bg-transparent" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg" style="color: #00DDFF; font-size: 1.2rem;"></i></button>
                                        </div>
                                        <hr style="border: solid px #ffffff;">
                                        <form  action="{% url 'add_shooter' %}" method="post" class="mt-1" style="color: #e0e0e0;">
                                            {% csrf_token %}
                                            <div class="modal-body">
                                                <p class="text-center form-heading" style="font-size: 1.2rem;">Fill in the details to register a new shooter.</p>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="first_name" class="form-label form-heading">First Name</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="text" id="first_name" name="first_name" class="form-control" placeholder="Enter your first name" minlength="4" maxlength="255" required >
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="last_name" class="form-label form-heading">Last Name</label>
                                                    </div>    
                                                    <div class="col-md-6">
                                                        <input type="text" id="last_name" name="last_name" class="form-control" placeholder="Enter your last name" minlength="3" maxlength="256" required >
                                                    </div>
                                                    <small class="text-light" id="first_last-requirements" style="display: none;">Alphabets only accepted<br>
                                                        * Must contain a lower case letter(a-z)<br>
                                                        * Must contain an upper case letter(A-Z)<br>
                                                        * Must not contain a number(0-9)<br>
                                                        * Must not contain a symbol(!#$%^&*>?)</small>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="username" class="form-label form-heading">Username</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="text" id="username" name="username" class="form-control" placeholder="Set your username" minlength="8" maxlength="16" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="email" class="form-label form-heading">Email</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="dob" class="form-label form-heading">Date of Birth</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="date" id="dob" name="dob" class="form-control" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="gender" class="form-label form-heading">Gender</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <select name="gender" id="gender" class="form-select" required>
                                                            <option value="" disabled selected>Select your gender</option>
                                                            <option value="Male">Male</option>
                                                            <option value="Female">Female</option>
                                                            <option value="Other">Other</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6">
                                                        <label for="mobile" class="form-label form-heading">Mobile Number</label>
                                                    </div>
                                                    <div class="col-6">
                                                        <input type="tel" id="mobile" name="mobile" class="form-control" placeholder="Enter your mobile number" pattern="[0-9]{10}" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6">
                                                        <label for="password1" class="form-label form-heading">Password</label>
                                                    </div>
                                                    <div class="col-6">
                                                        <input type="password" id="password1" name="password1" class="form-control" placeholder="Enter your password" required pattern="(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}">
                                                        <small class="text-light" id="password-requirements" style="display: none;">Password must be at least 8 characters long.<br>
                                                                                            * Must contain a lower case letter(a-z)<br>
                                                                                            * Must contain an upper case letter(A-Z)<br>
                                                                                            * Must contain a number(0-9)<br>
                                                                                            * Must contain a symbol(!#$%^&*>?)</small>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6">
                                                        <label for="password2" class="form-label form-heading">Confirm Password</label>
                                                    </div>
                                                    <div class="col-6">
                                                    <input type="password" id="password2" name="password2" class="form-control" placeholder="Confirm password" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-3">
                                                    <div class="col-md-6">
                                                        <label for="role" class="form-label form-heading">Role</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <select name="role" id="role" class="form-select">
                                                            <option value="Shooter">Shooter</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer" style="border-top: none;">
                                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                                                <button type="submit" class="btn text-dark" style="background-color: #00ddff;">Register</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% comment %} Add coach modal {% endcomment %}
                            <div class="modal fade" id="coachAddModal" tabindex="-1" aria-labelledby="coachAddModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content" style="background-color: #050505; border-radius: 12px; border: solid 1px #00DDFF;">
                                        <div class="modal-header" style="border-bottom: none;">
                                            <h4 class="modal-title" id="CoachAddModalLabel" style="color: #00DDFF; font-size: 1.5rem;">Add Coach</h4>
                                            <button type="button" class="border-0 bg-transparent" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg" style="color: #00DDFF; font-size: 1.2rem;"></i></button>
                                        </div>
                                        <hr style="border: solid px #ffffff;">
                                        <form  action="{% url 'add_coach' %}" method="post" class="mt-1" style="color: #e0e0e0;">
                                            {% csrf_token %}
                                            <div class="modal-body">
                                                <p class="text-center form-heading" style="font-size: 1.2rem;">Register a new Coach.</p>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="first_name" class="form-label form-heading">First Name</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="text" id="first_name" name="first_name" class="form-control" placeholder="Enter your first name" minlength="4" maxlength="255" required >
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="last_name" class="form-label form-heading">Last Name</label>
                                                    </div>    
                                                    <div class="col-md-6">
                                                        <input type="text" id="last_name" name="last_name" class="form-control" placeholder="Enter your last name" minlength="3" maxlength="256" required >
                                                    </div>
                                                    <small class="text-light" id="first_last-requirements" style="display: none;">Alphabets only accepted<br>
                                                        * Must contain a lower case letter(a-z)<br>
                                                        * Must contain an upper case letter(A-Z)<br>
                                                        * Must not contain a number(0-9)<br>
                                                        * Must not contain a symbol(!#$%^&*>?)</small>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="username" class="form-label form-heading">Username</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="text" id="username" name="username" class="form-control" placeholder="Set your username" minlength="8" maxlength="16" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="email" class="form-label form-heading">Email</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="dob" class="form-label form-heading">Date of Birth</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="date" id="dob" name="dob" class="form-control" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="gender" class="form-label form-heading">Gender</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <select name="gender" id="gender" class="form-select" required>
                                                            <option value="" disabled selected>Select your gender</option>
                                                            <option value="Male">Male</option>
                                                            <option value="Female">Female</option>
                                                            <option value="Other">Other</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6">
                                                        <label for="mobile" class="form-label form-heading">Mobile Number</label>
                                                    </div>
                                                    <div class="col-6">
                                                        <input type="tel" id="mobile" name="mobile" class="form-control" placeholder="Enter your mobile number" pattern="[0-9]{10}" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6">
                                                        <label for="password1" class="form-label form-heading">Password</label>
                                                    </div>
                                                    <div class="col-6">
                                                        <input type="password" id="password1" name="password1" class="form-control" placeholder="Enter your password" required pattern="(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}">
                                                        <small class="text-light" id="password-requirements" style="display: none;">Password must be at least 8 characters long.<br>
                                                                                            * Must contain a lower case letter(a-z)<br>
                                                                                            * Must contain an upper case letter(A-Z)<br>
                                                                                            * Must contain a number(0-9)<br>
                                                                                            * Must contain a symbol(!#$%^&*>?)</small>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6">
                                                        <label for="password2" class="form-label form-heading">Confirm Password</label>
                                                    </div>
                                                    <div class="col-6">
                                                    <input type="password" id="password2" name="password2" class="form-control" placeholder="Confirm password" required>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="role" class="form-label form-heading">Role</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <select name="role" id="role" class="form-select">
                                                            <option value="Coach">Coach</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="specialization" class="form-label form-heading">Specialization</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <select name="specialization" id="specialization" class="form-select">
                                                            <option value="10M Air Rifle">10M Air Rifle</option>
                                                            <option value="10M Air Pistol">10M Air Pistol</option>
                                                            <option value="25M Pistol">25M Pistol</option>
                                                            <option value="50M Pistol">50M Pistol</option>
                                                            <option value="50M Rifle">50M Rifle</option>
                                                        </select>
                                                    </div> 
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-md-6">
                                                        <label for="experience" class="form-label form-heading">Years of Experience</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="number" id="experience" name="experience" class="form-control" placeholder="Enter your years of experience" min="0">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer" style="border-top: none;">
                                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                                                <button type="submit" class="btn text-dark" style="background-color: #00ddff;">Register</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% comment %} shooter Edit modal {% endcomment %}
                            <div class="modal fade" id="coachAddModal" tabindex="-1" aria-labelledby="coachAddModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content" style="background-color: #050505; border-radius: 12px; border: solid 1px #00DDFF;">
                                        <div class="modal-header" style="border-bottom: none;">
                                            <h4 class="modal-title" id="CoachAddModalLabel" style="color: #00DDFF; font-size: 1.5rem;">Add Shooter</h4>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="color: #00DDFF;"></button>
                                        </div>
                                        <div class="modal-body">
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            <button type="button" class="btn btn-primary">Add Shooter</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% comment %} coach-relation container {% endcomment %}
            <div id="coach-relation-container" class="container-fluid text-light" style="background-color: #202020; border-radius:12px; display:none;">
                <div class="row d-flex justify-content-between align-items-start gap-2" style="padding-top:10px;">
                    <div class="col-md-12 ">
                        <div class="row text-center align-items-center gx-2 pb-3"style="background-color: #050505; border-radius: 12px; padding-top: 12px; padding-left: 12px;">
                            <div class="col-3" style="text-align: center; border-right: solid 1px #00DDFF; border-bottom: solid 1px #00DDFF; border-radius: 12px;">
                                <div class="d-flex flex-column flex-md-row gap-3 p-3 justify-content-between align-items-center">
                                    <h4 class="tb-head mb-3">Coaches</h4>
                                    {% comment %} <input type="text" id="coachSearch" class="form-control" placeholder="Search Coaches..."> {% endcomment %}
                                </div>
                                <ul class="list-group-flush mb-4">
                                    {% for coach in club_coaches %}
                                    <li class="list-group-item text-light d-flex justify-content-between px-3 py-1" style="font-size:18px;" >
                                    <button class="btn btn-outline-info w-100 coach-btn" data-coach-id="{{ coach.id }}">{{ forloop.counter }}. {{ coach.username }}</button>
                                    {% endfor %}
                                </ul>
                                <div class="d-flex flex-column flex-md-row gap-3 p-3 justify-content-between align-items-center">
                                    <h4 class="tb-head mb-0">Shooters</h4>
                                    {% comment %} <input type="text" id="shooterSearch" class="form-control" placeholder="Search Shooters..."> {% endcomment %}
                                </div>                                
                                    <ul class="list-group-flush  mb-4">
                                    {% for shooter in club_students %}
                                    <li class="list-group-item text-light d-flex justify-content-between px-3 py-1" style="font-size:18px;" >
                                        <button class="btn btn-outline-info w-100 shooter-btn" data-shooter-id="{{ shooter.id }}">{{ forloop.counter }}. {{ shooter.username }}</button>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col-9">
                                <h4 class="tb-head mb-3">Coach-Shooter Relation</h4>
                                <div id="relation-display" class="p-3">
                                    <!-- You can display the relation here or add controls to create new ones -->
                                    <p style="color: gray;">Select a coach or shooter to view relation data here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% comment %} assign shootermodal {% endcomment %}
                <div class="modal fade" id="addShooterModal" tabindex="-1" aria-labelledby="addShooterModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content text-light" style="background-color: #151515">
                            <div class="modal-header">
                                <h5 class="modal-title text-info" id="addShooterModalLabel">Add Shooter</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="close"></button>
                            </div>
                            <div class="modal-body">
                                <form id="add-shooter-form" method="POST">
                                    <div class="mb-3">
                                        <label for="available-shooters-select" class="form-label">Select Shooters</label>
                                        <select id="available-shooters-select" name="shooter_ids" class="form-select" multiple required>
                                        </select>
                                    </div>
                                    <input type="hidden" name="coach_id" id="modal-coach-id">
                                </form>
                                
                            </div>
                            <div class="modal-footer justify-content-between ">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-info" id="assign-shooters-btn">Assign Shooter</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Coach Assign Modal -->
                <div class="modal fade" id="assignCoachModal" tabindex="-1" aria-labelledby="assignCoachModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content bg-dark text-light">
                        <div class="modal-header">
                        <h5 class="modal-title" id="assignCoachModalLabel">Assign a Coach</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                        <select class="form-select" id="coachSelect">
                            <option value="">Select a coach</option>
                            <!-- Coach options will be injected here -->
                        </select>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="assignCoachBtn" disabled>Assign Coach</button>
                        </div>
                    </div>
                    </div>
                </div>
                {% comment %} unassign coach modal {% endcomment %}
                <div class="modal fade" id="unassignCoachModal" tabindex="-1" aria-labelledby="unassignCoachModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content bg-dark text-light">
                        <div class="modal-header">
                          <h5 class="modal-title" id="unassignCoachModalLabel">Confirm Unassign</h5>
                          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                          Are you sure you want to unassign the coach from this shooter?
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                          <button class="btn btn-danger confirm-unassign-btn">
                            Confirm Unassign
                        </button>                        
                        </div>
                      </div>
                    </div>
                  </div>                  
            </div>
            {% comment %} notification container {% endcomment %}
            <div id="notification-container" class="container-fluid text-light" style="background-color: #202020; border-radius:12px; display:none;">
                <div class="row d-flex justify-content-between align-items-start gap-2" style="padding-top:10px;">
                    <div class="col-md-12">
                        <div class="row align-items-center gx-2"style="background-color: #050505; border-radius: 12px; padding-top: 12px;">
                            <div class="w-100" style="max-height: 40vh; overflow-y:auto; overflow-x: auto;scrollbar-width: none;" >
                                <div class="row mt-1 p-3"style="background-color: #050505; border-radius: 15px;">
                                    <div class="col-12">
                                        <div class="d-flex align-items-center">
                                            <!-- Spacer (Pushes the title to center) -->
                                            <div class="flex-grow-1 text-center">
                                                <h4 class="m-0" style="color: #00DDFF; font-weight: bold; font-style: italic;"> Upcoming Matches & Events</h4>
                                            </div>
                                            <!-- Create Button (Aligned to the Right) -->
                                            <button onclick="showDetails('eventFormContainer')" class="btn btn-sm btn-info mb-2"><i class="bi bi-plus-lg"></i> Add Event</button>
                                        </div>
                                        <!-- Event List -->
                                        <ul class="list-group">
                                            {% for event in events %}
                                            <li class="list-group-item bg-dark d-flex justify-content-between">
                                                <div class="text-light">
                                                    <strong>{{ event.title }}</strong> - {{ event.date }}<br>
                                                     {{ event.location|default:"TBA" }}
                                                </div>
                                                <span class="badge bg-info">{{ event.visibility|title }}</span>
                                            </li>
                                            {% empty %}
                                            <li class="list-group-item text-center" 
                                            style="background-color: #050505; color: #00DDFF; border: 1px solid #00DDFF; border-radius: 10px;">
                                            No upcoming events
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    <div class="col-12 mt-3" >
                                        <!-- Add Event Modal -->
                                        <div id="eventFormContainer" style="display:none; border: 1px solid #00DDFF; padding: 15px; border-radius: 10px;">
                                            <h5 class="text-center">Add New Event</h5>
                                            <form method="post">
                                                {% csrf_token %}
                                                {{ formevent.as_p }}
                                                <button type="submit" name="event_submit" class="btn btn-primary w-100">Save Event</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-info">Messages</p>
                            <div class="w-100" style="max-height: 70vh; overflow: auto:" >
                                {% if conversations %}  
                                <div class="py-3">
                                    <div class="row">
                                        <!-- Conversation List -->
                                        <div class="col-12 col-md-4 mb-3 mb-md-0 scrollable-element ps-3" style="max-height: 40vh; overflow-y: auto;" >
                                            {% for convo in conversations %}
                                                <div class="card p-3 mb-3 message-card open-chat" data-profile-name="{{ userprofile.username }}" data-profile-id="{{ profile_id }}" data-user-id="{{ convo.other_user.id }}" style="cursor: pointer; transition: background-color 0.3s;">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar">
                                                                <span class="avatar-text">{{ convo.other_user.username|first|upper }}</span>
                                                            </div>
                                                            <span class="text-light ms-2 username"><b>{{ convo.other_user.username }}</b></span>
                                                        </div>
                                                        <div>
                                                            <small class="text-light">{{ convo.last_message.timestamp|date:"H:i" }}</small>
                                                            {% if convo.unread_count > 0 %}
                                                                <span class="badge bg-danger unread-badge">{{ convo.unread_count }}</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <p class="text-light mt-2 message-preview">{{ convo.last_message.content|truncatechars:50 }}</p>
                                                </div>
                                            {% endfor %}
                                        </div>
        
                                        <!-- Chat Window (Will be loaded dynamically) -->
                                        <div class="col-12 col-md-8 " style="max-height:40vh; overflow-y: auto;">
                                            <div id="chat-window" class="chat-box">
                                                <p class="text-light">Select a chat to start messaging</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% else %}
                                    <p class="text-center">No messages yet.</p>
                                {% endif %}    
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% comment %} profile container {% endcomment %}
            <div id="profile-container" class="container-fluid text-light" style="background-color: #202020; border-radius:12px; display:none;">
                <div class="row d-flex justify-content-between align-items-start gap-2" style="padding-top:10px;">      
                    <div style="width: 80%; margin: auto; padding: 20px; background-color: #050505; border-radius: 10px; border-right: solid 1px #00DDFF; border-bottom: solid 1px #00DDFF;">
                        <h2 style="color: #00DDFF; text-align: left; margin-bottom: 20px;">Profile Settings</h2>
                        <div class="row">
                            <!-- Profile Image & Name -->
                            <div class="col-4" style="text-align: center;">
                                <i class="fas fa-user-circle" style="font-size: 120px; color: #00DDFF;"></i>
                                <h3 style="color: #00DDFF; margin-top: 10px;"><i class="bi bi-credit-card-2-front"></i>{{ user.username }}</h3>
                                {% comment %} <p style="color: grey;"><i class="bi bi-bullseye"></i> {{ specialization }}</p> {% endcomment %}
                                <p style="color: grey;"><i class="bi bi-gender-ambiguous"></i> Gender {{ gender }}</p>
                                {% comment %} <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#editProfileModal" style="background-color: #00DDFF; margin-right: 12px; border: none; padding: 8px 15px; border-radius: 5px; color: black; font-weight: bold; cursor: pointer; margin-top: 10px;">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="btn btn-info" onclick="document.getElementById('shooters-btn').click();" style="background-color: #00DDFF; border: none; padding: 8px 15px; border-radius: 5px; color: black; font-weight: bold; cursor: pointer; margin-top: 10px;">
                                    <i class="bi bi-people"></i> Students
                                </button> {% endcomment %}
                            </div>
                            <!-- Profile Info - Left Column -->
                            <div class="col-4 py-5" >
                                <p style="margin-bottom: 15px; font-size: 20px;"><strong style="color: #00DDFF; font-size:22px; margin-right: 8px;"><i class="bi bi-envelope-paper" style="margin-right: 8px;"></i> Email:</strong> <span style="color: white; border-bottom:2px;">{{ user.email }}</span></p>
                                <p style="margin-bottom: 15px; font-size: 20px;"><strong style="color: #00DDFF; font-size:22px; margin-right: 8px;"><i class="bi bi-telephone" style="margin-right: 8px;"></i> Phone:</strong> <span style="color: white;">{{ user.mobile_number }}</span></p>
                                <p style="margin-bottom: 15px; font-size: 20px;"><strong style="color: #00DDFF; font-size:22px; margin-right: 8px;"><i class="bi bi-calendar-event" style="margin-right: 8px;"></i> DOB:</strong> <span style="color: white;">{{ user.date_of_birth }}</span></p>
                            </div>
                            <!-- Profile Info - Right Column -->
                            <div class="col-4 py-5">
                                <p style="margin-bottom: 15px; font-size: 20px;"><strong style="color: #00DDFF; font-size:22px; margin-right: 8px;"><i class="bi bi-people" style="margin-right: 8px;"></i> Shooters:</strong> <span style="color: white;">{{ students_count }}</span></p>
                                <p style="margin-bottom: 15px; font-size: 20px;"><strong style="color: #00DDFF; font-size:22px; margin-right: 8px;"><i class="bi bi-graph-up-arrow" style="margin-right: 8px;"></i> Established:</strong> <span style="color: white;">{{ user.years_of_experience }}</span></p>
                                <p style="margin-bottom: 15px; font-size: 20px;"><strong style="color: #00DDFF; font-size:22px; margin-right: 8px;"><i class="bi bi-cup-hot" style="margin-right: 8px;"></i> Club:</strong> <span style="color: white;">{{ user.affiliated_club }}</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% comment %} settings container {% endcomment %}
            <div id="settings-container" class="container-fluid text-light bg-base-dark rounded " style="display:none;">
                <div class="row d-flex justify-content-between align-items-start gap-2 pt-2 " style="padding-top:10px;">
                    <div class="col-md-8">

                    </div>
                </div>
            </div> 
        </div>
    </div>
</div>
<script src="{% static 'js/admin/adminhome.js' %}" defer></script>
{% endblock %}